<div class="grid" *ngIf="combined$ | async as combined;">
  <div class="left-nav">
    <mat-nav-list>
      <a mat-list-item  *ngFor="let team of combined[0]" (click)="loadTeam(team)">{{team.city}} {{team.nickname}}</a>
    </mat-nav-list>
  </div>

  <form class="team-info right-content column" *ngIf="team$ | async as team; else placeholder">
    <mat-card>
      <h3 class="mat-title">Informações</h3>
      <mat-form-field>
        <input matInput [(value)]="team.city" placeholder="Nome" required>
      </mat-form-field>
      <mat-form-field>
        <input matInput [(value)]="team.nickname" placeholder="Apelido" required>
      </mat-form-field>
      <mat-form-field>
        <input matInput [(value)]="team.slug" placeholder="Identificador" required>
      </mat-form-field>
      <mat-form-field *ngIf="divisions$ | async as divisions;">
        <mat-select placeholder="Divisão" [(value)]="team.division.id_division">
          <mat-option *ngFor="let division of divisions" [value]="division.id_division">{{division.name}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-select placeholder="GM" [(value)]="team.users[0].id_user">
          <mat-option *ngFor="let user of combined[1]" [value]="user.id_user">{{user.nickname}}</mat-option>
        </mat-select>
      </mat-form-field>
    </mat-card>
    <mat-card>
      <h3 class="mat-title">Jogadores</h3>
      <mat-card-content>
        <div class="add-player">
          <mat-form-field *ngIf="freeAgents$ | async as freeAgents;">
            <mat-select placeholder="Adicionar jogador" [(value)]="selected">
              <mat-option *ngFor="let player of freeAgents" [value]="player">
                {{player.first_name}} {{player.last_name}}
                ({{player.default_primary}}/{{player.default_secondary}})
              </mat-option>
            </mat-select>
          </mat-form-field>
          <button type="button" mat-button color="primary">Adicionar jogador</button>
        </div>
        <mat-list>
          <mat-list-item *ngFor="let player of team.players">
            <img matListAvatar src="https://static.draftbrasil.net/player/avatar/{{player.id_player}}.jpg">
            <div matLine class="player-line">
              #{{player.team_info.order}}
              {{player.first_name}} {{player.last_name}}
              ({{player.team_info.primary_position}}/{{player.team_info.secondary_position}})
              <div class="actions">
                <button type="button" mat-button color="error">Dispensar</button>
                <button type="button" mat-icon-button color="accent">
                  <mat-icon>arrow_upward</mat-icon>
                </button>
                <button type="button" mat-icon-button color="accent">
                  <mat-icon>arrow_downward</mat-icon>
                </button>
              </div>
            </div>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
       <mat-card-actions>
         <button mat-button color="primary">Salvar ordem</button>
       </mat-card-actions>
    </mat-card>
  </form>
  <ng-template #placeholder>
    <div class="right-content">
      <h3 class="mat-title" *ngIf="!team$">Selecione uma equipe</h3>
      <h3 class="mat-title" *ngIf="team$">Carregando...</h3>
    </div>
  </ng-template>
</div>